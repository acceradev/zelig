## Zelig
One tool to test all your APIs

### Description
Zelig provides a possibility to test your local and remote APIs.
It could work in 4 modes:
 * `record`
 * `serve`
 * `playback`
 * `observe`

#### Record
In `record` mode Zelig propagates all incoming requests to the specified server. Also it logs all request-response pairs.
#### Serve
In `serve` mode Zelig do not propagates incoming requests. Instead it returns previously recorded responses. Also it closes
the connection on unknown requests.
#### Playback
In `playback` mode Zelig reads all recorded request-response pairs and send all requests again. Then it compares old and new responses and logs mismatches
#### Observe
In `observe` mode Zelig works like in `record` mode, but it also logs all unknown incoming requests and all mismatched responses.

### How to use
Zelig can be configured using some environment variables:
 * __TARGET_SERVER_BASE_URL__ - url of a real server that is hidden behind zelig (`http://www.httpbin.org`)
 * __ZELIG_CASSETTE_DIRECTORY__ - name of directory where to store cassette(request-response files). Autogenerated if absent. 
 Generation template is `cassette_%Y-%m-%d_%H-%M-%S`. *Optional in `record` mode.*
 * [optional] __ZELIG_PLAYBACK_REPORT_DIRECTORY__ - name of directory to which we save logs in `playback` mode. Default is `playback_report_%Y-%m-%d_%H-%M-%S`
 * [optional] __ZELIG_OBSERVE_REPORT_DIRECTORY__ - name of directory to which we save logs in `observe` mode. Default is `observe_report_%Y-%m-%d_%H-%M-%S`
 * [optional] __ZELIG_HOST__ - host of the server. Default is `0.0.0.0`
 * [optional] __ZELIG_PORT__ - port of the server. Default is `8081`
 * [optional] __REQUEST_MATCH_ON__ - space separated list of request properties, that are used to compare requests. Default is `method scheme host port path query body`
 * [optional] __RESPONSE_MATCH_ON__ - space separated list of response properties, that are used to compare responses. Default is `body status`
 * [optional] __DEBUG__ - enables debug level console logs. Set to `1` or `true`

Also you should map your local directory to `/files` directory inside container. This directory will contain all logs writen by Zelig.
